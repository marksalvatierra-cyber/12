 #map { height: 500px; width: 100%; }
        #emergency-list { max-height: 200px; overflow-y: auto; }

        /* NEW: map container + legend styles */
        #map-container { position: relative; }
        #map-legend {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 1000; /* above Leaflet controls */
            background: rgba(255,255,255,0.95);
            border-radius: 8px;
            padding: 10px 12px;
            box-shadow: 0 6px 18px rgba(15,23,42,0.08);
            min-width: 160px;
            font-size: 0.95rem;
        }
        #map-legend .legend-title { font-weight:700; margin-bottom:6px; display:flex; align-items:center; gap:8px; }
        #map-legend .legend-item { display:flex; align-items:center; gap:8px; margin:6px 0; }
        #map-legend .legend-swatch { width:14px; height:14px; border-radius:3px; box-shadow:0 1px 2px rgba(0,0,0,0.08); flex:0 0 14px; }
    
    /* Badges */
        .badge { border-radius: 999px; padding: .35rem .6rem; font-weight: 700; display:inline-flex; align-items:center; gap:8px; }
        .badge-error { background: linear-gradient(90deg, rgba(255, 255, 255, 1), rgba(240, 240, 240, 1)); color: #000000ff; }
        .badge-info { background: linear-gradient(90deg, rgba(37,99,235,0.12), rgba(37,99,235,0.06)); color: #1e40af; }
        .badge-warning { background: linear-gradient(90deg, rgba(255, 255, 255, 1), rgba(240, 240, 240, 1)); color: #000000ff; }
        .badge-success { background: linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06)); color: #065f46; }
        .badge-ghost { background: rgba(15,23,42,0.03); color: var(--muted); }

        /* NEW: blinking red marker animation for unresolved incidents */
        @keyframes pulseRed {
            0% {
                transform: translateY(0) scale(1);
                text-shadow: 0 2px 6px rgba(0,0,0,0.35);
                filter: drop-shadow(0 0 0 rgba(255,0,0,0));
            }
            50% {
                transform: translateY(-2px) scale(1.06);
                text-shadow: 0 6px 18px rgba(255, 59, 48, 0.9);
                filter: drop-shadow(0 6px 18px rgba(255,59,48,0.85));
            }
            100% {
                transform: translateY(0) scale(1);
                text-shadow: 0 2px 6px rgba(0,0,0,0.35);
                filter: drop-shadow(0 0 0 rgba(255,0,0,0));
            }
        }
        .blinking-marker {
            animation: pulseRed 1.1s ease-in-out infinite;
            /* higher z-index so pulsing stands out above map controls */
            z-index: 8000;
            /* ensure pointer events still work */
            pointer-events: auto;
        }