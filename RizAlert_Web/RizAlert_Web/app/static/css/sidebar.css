:root { --accent: #960808; --accent-600: #cf063f; }

.sidebar-modern {
    background: linear-gradient(180deg,#7f1d1d,#4c0519); /* matches index.html */
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border-right: 1px solid rgba(255,255,255,0.04);
    box-shadow: 0 8px 28px rgba(2,6,23,0.14); /* slightly stronger for contrast */
    padding-top: 16px;
    display:flex;
    flex-direction:column;
}

.sidebar-modern .p-4 { padding: 1rem; }

.sidebar-modern .sidebar-profile {
    display:flex;
    align-items:center;
    gap:0.75rem;
    padding:0.5rem 0.25rem 1rem;
    margin-bottom:0.5rem;
    border-bottom:1px solid rgba(255,255,255,0.03);
}
.sidebar-modern .sidebar-profile .avatar {
    width:44px;
    height:44px;
    border-radius:10px;
    overflow:hidden;
    flex-shrink:0;
    box-shadow: 0 4px 18px rgba(2,6,23,0.12);
}
.sidebar-modern .sidebar-profile .avatar img { width:100%; height:100%; object-fit:cover; display:block; }

.sidebar-modern .sidebar-profile .meta { color: rgba(255,255,255,0.95); }
.sidebar-modern .sidebar-profile .meta .name { font-weight:700; font-size:0.95rem; }
.sidebar-modern .sidebar-profile .meta .sub { font-size:0.78rem; color: rgba(255,255,255,0.75); margin-top:2px; }

.sidebar-modern .menu { margin-top:0.5rem; }
.sidebar-modern .menu li { position:relative; margin:6px 0; }
.sidebar-modern .menu li a {
    display:flex;
    align-items:center;
    gap:0.75rem;
    padding:0.6rem 0.9rem;
    border-radius:8px;
    color: rgba(255,255,255,0.95);
    transition: all .12s ease;
    position:relative;
}
.sidebar-modern .menu li a .nav-icon { width:20px; text-align:center; opacity:0.95; }
.sidebar-modern .menu li a span { flex:1; font-weight:600; font-size:0.95rem; }

.sidebar-modern .menu li a:hover {
    background: rgba(255,255,255,0.04);
    transform: translateX(4px);
    color:#fff;
}

.sidebar-modern .menu li a.active {
    background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    box-shadow: inset 4px 0 0 var(--accent);
    color: #fff;
}
.sidebar-modern .menu li a.active::before {
    content: '';
    position: absolute;
    left: -8px;
    height: 36px;
    width: 6px;
    background: linear-gradient(180deg, var(--accent-600), var(--accent));
    border-radius: 4px;
    display: block;
    top: calc(50% - 18px);
}
.navbar {
            box-sizing: border-box;
            /* fluid width but constrained to a comfortable max */
            width: min(1200px, calc(100% - 24px));
            margin: 8px auto;
            /* padding scales between mobile and desktop */
            padding: clamp(.5rem, 2.2vw, 1rem);
            border-radius: 12px;
            background: linear-gradient(90deg, rgba(185,28,28,0.95), rgba(148,17,17,0.95));
            box-shadow: 0 6px 20px rgba(15,23,42,0.18);
            align-items: center;
        }
        .navbar .btn-ghost { color: rgba(247, 77, 77, 0.95); }
        .navbar h1 { letter-spacing: -.2px; }

@media (max-width: 640px) {
    .sidebar-modern { width: 220px; }
    .sidebar-modern .menu li a span { display:none; }
    .sidebar-modern .sidebar-profile .meta { display:none; }
}
/* Badges */
        .badge { border-radius: 999px; padding: .35rem .6rem; font-weight: 700; display:inline-flex; align-items:center; gap:8px; }
        .badge-error { background: linear-gradient(90deg, rgba(255, 255, 255, 1), rgba(240, 240, 240, 1)); color: #000000ff; }
        .badge-info { background: linear-gradient(90deg, rgba(37,99,235,0.12), rgba(37,99,235,0.06)); color: #1e40af; }
        .badge-warning { background: linear-gradient(90deg, rgba(255, 255, 255, 1), rgba(240, 240, 240, 1)); color: #000000ff; }
        .badge-success { background: linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06)); color: #065f46; }
        .badge-ghost { background: rgba(15,23,42,0.03); color: var(--muted); }

         #map { height: 500px; width: 100%; }
        #emergency-list { max-height: 200px; overflow-y: auto; }

        /* NEW: map container + legend styles */
        #map-container { position: relative; }
        #map-legend {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 1000; /* above Leaflet controls */
            background: rgba(255,255,255,0.95);
            border-radius: 8px;
            padding: 10px 12px;
            box-shadow: 0 6px 18px rgba(15,23,42,0.08);
            min-width: 160px;
            font-size: 0.95rem;
        }
        #map-legend .legend-title { font-weight:700; margin-bottom:6px; display:flex; align-items:center; gap:8px; }
        #map-legend .legend-item { display:flex; align-items:center; gap:8px; margin:6px 0; }
        #map-legend .legend-swatch { width:14px; height:14px; border-radius:3px; box-shadow:0 1px 2px rgba(0,0,0,0.08); flex:0 0 14px; }
    

        /* NEW: blinking red marker animation for unresolved incidents */
        @keyframes pulseRed {
            0% {
                transform: translateY(0) scale(1);
                text-shadow: 0 2px 6px rgba(0,0,0,0.35);
                filter: drop-shadow(0 0 0 rgba(255,0,0,0));
            }
            50% {
                transform: translateY(-2px) scale(1.06);
                text-shadow: 0 6px 18px rgba(255, 59, 48, 0.9);
                filter: drop-shadow(0 6px 18px rgba(255,59,48,0.85));
            }
            100% {
                transform: translateY(0) scale(1);
                text-shadow: 0 2px 6px rgba(0,0,0,0.35);
                filter: drop-shadow(0 0 0 rgba(255,0,0,0));
            }
        }
        .blinking-marker {
            animation: pulseRed 1.1s ease-in-out infinite;
            /* higher z-index so pulsing stands out above map controls */
            z-index: 8000;
            /* ensure pointer events still work */
            pointer-events: auto;
        }

        /* Gradient Button */
    
        .btn-gradient-red {
            background: linear-gradient(90deg,#ef4444 0%, #b91c1c 100%);
            color: #fff;
            border: none;
            box-shadow: 0 10px 30px rgba(185,28,28,0.12);
            transition: transform .12s ease, box-shadow .12s ease;
        }


        .btn-gradient-red:hover, .btn-gradient-red:focus { transform: translateY(-2px); box-shadow:0 16px 36px rgba(185,28,28,0.18); }
        input.input-bordered:focus, .select.select-bordered:focus, textarea.textarea-bordered:focus {
            outline: none;
            box-shadow: 0 8px 30px rgba(59,130,246,0.06);
            border-color: rgba(59,130,246,0.9);
        }
        /* password toggle inside input */
        .input-with-toggle { position: relative; }
        
        .pw-toggle-btn {
            position: absolute;
            right: 10%;
            top: 50%;
            transform: translateY(-50%);
            display:inline-flex;
            align-items:center;
            justify-content:center;
            width:34px;
            height:34px;
            border-radius:8px;
            background: transparent;
            color: rgba(55,65,81,0.9);
            border: none;
            cursor: pointer;
        }
        .pw-toggle-btn:focus { outline: none; box-shadow: 0 0 0 3px rgba(37,99,235,0.12); }
    